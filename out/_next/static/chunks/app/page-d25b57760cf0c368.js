(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1279:function(e,s,t){Promise.resolve().then(t.bind(t,4577))},4577:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return M}});var r=t(3827),a=t(4090),o=t(5754),l=t(1657);let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...a})});n.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});c.displayName="CardTitle",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...a})}).displayName="CardDescription";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter";let m=a.forwardRef((e,s)=>{let{className:t,type:a,...o}=e;return(0,r.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...o})});m.displayName="Input";let u=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...a})});u.displayName="Textarea";var p=t(6944);let x=p.fC,f=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(p.aV,{ref:s,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...a})});f.displayName=p.aV.displayName;let h=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(p.xz,{ref:s,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...a})});h.displayName=p.xz.displayName;let g=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(p.VY,{ref:s,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a})});g.displayName=p.VY.displayName;let y=(0,t(9769).j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),b=a.forwardRef((e,s)=>{let{className:t,variant:a,...o}=e;return(0,r.jsx)("div",{className:(0,l.cn)(y({variant:a}),t),ref:s,...o})});b.displayName="Badge";var v=t(6490),j=t(5222),w=t(7336),N=t(6210),S=t(3081),C=t(3348),k=t(489),O=t(6570),P=t(94),D=t(703);function z(e){let{isOpen:s,onClose:t,onConfirm:a,title:l,message:n}=e;return s?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsx)(i,{className:"pompompurin-card p-6 max-w-sm w-full mx-4",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-xl font-bold pompompurin-text mb-4",children:l}),(0,r.jsx)("p",{className:"pompompurin-text mb-6 truncate px-2",children:n}),(0,r.jsx)("div",{className:"flex justify-center mb-6",children:(0,r.jsx)(D.default,{src:"/images/gifs/delete.gif",alt:"Delete animation",width:100,height:100,className:"rounded-lg"})}),(0,r.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,r.jsx)(o.z,{onClick:t,variant:"outline",className:"pompompurin-button bg-gray-100 hover:bg-gray-200 text-gray-700 border-gray-300",children:"No, Cancel"}),(0,r.jsx)(o.z,{onClick:a,className:"pompompurin-button bg-red-500 hover:bg-red-600 text-white",children:"Yes, Delete"})]})]})})}):null}var T=t(2235);function A(e){let{isOpen:s,onClose:t,title:a,content:l,createdAt:m}=e;return s?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&t()},children:(0,r.jsxs)(i,{className:"pompompurin-card w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[(0,r.jsx)(n,{className:"pb-3",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex-1 pr-4",children:[(0,r.jsx)(c,{className:"text-xl break-words leading-tight word-break",children:a}),(0,r.jsx)("p",{className:"text-sm opacity-70 mt-2",children:m})]}),(0,r.jsx)(o.z,{onClick:t,size:"sm",variant:"ghost",className:"text-gray-500 hover:text-gray-700 flex-shrink-0",children:(0,r.jsx)(T.Z,{className:"w-4 h-4"})})]})}),(0,r.jsx)(d,{className:"overflow-y-auto max-h-[60vh]",children:(0,r.jsx)("div",{className:"whitespace-pre-wrap break-words text-base leading-relaxed word-break",children:l})})]})}):null}var E=t(2821),I=t(834),R=t(4715);let F=[{name:"Pink",value:"#ff9ed8"},{name:"Yellow",value:"#f9f4a1"},{name:"Blue",value:"#a1e4f9"},{name:"Green",value:"#b8f9a1"},{name:"Purple",value:"#d8a1f9"}],U=[{id:"single",name:"Single",cols:1,rows:1,count:1},{id:"column",name:"Column x3",cols:1,rows:3,count:3},{id:"row",name:"Row x3",cols:3,rows:1,count:3},{id:"grid",name:"Grid 2x2",cols:2,rows:2,count:4}];function Z(){let e=(0,a.useRef)(null),s=(0,a.useRef)(null);(0,a.useEffect)(()=>{console.log("Video ref updated:",!!e.current)},[e.current]);let[t,l]=(0,a.useState)(null),[n,c]=(0,a.useState)(!1),[m,u]=(0,a.useState)(F[0].value),[p,x]=(0,a.useState)(U[0]),[f,h]=(0,a.useState)([]),[g,y]=(0,a.useState)(!1),[b,j]=(0,a.useState)(!1),[N,S]=(0,a.useState)(3),[C,k]=(0,a.useState)(!1),[O,P]=(0,a.useState)(0),[D,z]=(0,a.useState)(!1);(0,a.useEffect)(()=>()=>{t&&t.getTracks().forEach(e=>e.stop())},[t]),(0,a.useEffect)(()=>{if(b){if(N>0){let e=setTimeout(()=>S(e=>e-1),1e3);return()=>clearTimeout(e)}C?(H(),O+1<p.count?(P(e=>e+1),S(3)):(j(!1),k(!1),P(0))):(H(),j(!1))}},[b,N,C,O]);let A=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Z=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,M=async()=>{console.log("Start camera function called"),z(!0);try{let s;if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){console.error("Media devices or getUserMedia not supported"),alert("Your browser doesn't support camera access. Please try a different browser like Chrome or Firefox."),z(!1);return}if((A()||Z())&&"https:"!==window.location.protocol&&"localhost"!==window.location.hostname){console.error("Safari/iOS requires HTTPS for camera access"),alert("Safari and iOS require HTTPS for camera access. Please use this application on a secure connection or try Chrome/Firefox on desktop."),z(!1);return}if(console.log("Requesting camera access..."),Z()){console.log("iOS device detected, using specific constraints");try{console.log("Attempting iOS camera access with specific constraints"),s=await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:{ideal:640,max:1280},height:{ideal:480,max:720}}}),console.log("iOS camera access successful with specific constraints")}catch(e){console.error("iOS camera access failed with specific constraints:",e);try{console.log("Trying fallback with minimal constraints for iOS"),s=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1}),console.log("iOS camera access successful with minimal constraints")}catch(e){console.error("iOS camera access failed with minimal constraints:",e);try{console.log("Trying with environment camera on iOS"),s=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}),console.log("iOS camera access successful with environment camera")}catch(e){throw console.error("All iOS camera access attempts failed:",e),Error("Unable to access camera on iOS. Please check your privacy settings and ensure Safari has camera access.")}}}}else{let e={video:!!A()||{facingMode:"user",width:{ideal:1280},height:{ideal:720}}};s=await navigator.mediaDevices.getUserMedia(e)}l(s),c(!0),setTimeout(()=>{if(e.current){console.log("Setting video source object to stream");try{e.current.srcObject=s}catch(e){console.error("Error setting srcObject:",e),console.warn("Failed to set srcObject directly, video may not work on this browser")}e.current.onloadedmetadata=()=>{console.log("Video metadata loaded, attempting to play"),e.current&&setTimeout(()=>{e.current&&e.current.play().then(()=>{console.log("Video playback started successfully"),y(!0)}).catch(e=>{console.error("Error playing video:",e),A()?alert("Safari has restricted camera access. Please check your camera permissions in Safari settings and ensure you're using HTTPS."):alert("Could not start video playback. Please check your camera permissions.")})},A()?300:0)},e.current.onplay=()=>console.log("Video play event triggered"),e.current.onplaying=()=>console.log("Video is now playing"),e.current.onwaiting=()=>console.log("Video is waiting for data"),e.current.onerror=e=>console.error("Video element error:",e)}else console.error("Video ref is still not available after timeout"),alert("Could not initialize camera. Please try refreshing the page."),s.getTracks().forEach(e=>e.stop()),c(!1),l(null)},100)}catch(e){console.error("Error accessing camera:",e),alert("Could not access your camera. Please make sure you've granted camera permissions in your browser settings.")}finally{z(!1)}},V=()=>{t&&(t.getTracks().forEach(e=>e.stop()),l(null)),c(!1),y(!1)},H=()=>{let t;if(!e.current||!s.current)return;let r=e.current,a=s.current,o=a.getContext("2d");if(o){Z()&&console.log("iOS device detected, optimizing capture process");try{if(r.videoWidth&&r.videoHeight){let e,s;let t=4/3;r.videoWidth/r.videoHeight>t?(e=r.videoHeight*t,s=r.videoHeight):(e=r.videoWidth,s=r.videoWidth/t),a.width=e,a.height=s;let l=(r.videoWidth-e)/2,i=(r.videoHeight-s)/2;o.drawImage(r,l,i,e,s,0,0,e,s)}else console.warn("Video dimensions not available yet"),a.width=640,a.height=480;t=a.toDataURL("image/png")}catch(e){console.error("Error capturing photo:",e),alert("Failed to capture photo. The camera may not be fully initialized yet.");return}h(e=>{if(!C)return[...e,t];let s=[...e];return O<s.length?s[O]=t:s.push(t),s})}},Y=()=>{h([]),P(0)},J=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];S(3),j(!0),k(e),e&&(h(Array(p.count).fill("")),P(0))},L=e=>{x(e),h([])},[B,W]=(0,a.useState)(null),[_,q]=(0,a.useState)(""),G="#a65c18",X="#fefcac",K="#a65c18",Q={fontFamily:'var(--font-inter), -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif',fontWeight:"400",fontStyle:"normal"};return(0,a.useEffect)(()=>{{let e=navigator.userAgent,s="Unknown browser";/Safari/i.test(e)&&!/Chrome/i.test(e)?(s="Safari",/iPhone|iPad|iPod/i.test(e)&&(s="Mobile Safari")):/Firefox/i.test(e)?s="Firefox":/Chrome/i.test(e)?s="Chrome":/Edge/i.test(e)&&(s="Edge"),q(s);let t=!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia),r=!1;try{r=!!document.createElement("canvas").getContext("2d")}catch(e){console.error("Canvas creation error:",e)}W(t&&r),t||console.warn("".concat(s," doesn't support camera access")),r||console.warn("".concat(s," doesn't properly support canvas")),s.includes("Safari")&&!s.includes("Chrome")&&(console.warn("Safari has additional camera access restrictions"),"https:"!==window.location.protocol&&"localhost"!==window.location.hostname&&console.warn("Safari requires HTTPS for camera access"))}},[]),(0,r.jsxs)("div",{className:"space-y-4 px-2 sm:px-4 font-sans",style:{fontFamily:'var(--font-inter), -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif',fontStyle:"normal"},children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 sm:items-center sm:justify-between mb-4",children:[(0,r.jsx)("div",{className:"flex justify-center sm:justify-start gap-4 mb-2 sm:mb-0",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium mr-1",style:Q,children:"Frame:"}),F.map(e=>(0,r.jsx)("button",{onClick:()=>u(e.value),className:"w-8 h-8 rounded-full border-2 ".concat(m===e.value?"border-black":"border-white"),style:{backgroundColor:e.value},title:e.name,"aria-label":"Select ".concat(e.name," frame color")},e.name))]})}),(0,r.jsx)("div",{className:"grid grid-cols-2 sm:flex sm:flex-wrap gap-2",children:U.map(e=>(0,r.jsxs)(o.z,{onClick:()=>L(e),variant:p.id===e.id?"default":"outline",size:"sm",className:"flex items-center justify-center gap-1",style:{backgroundColor:p.id===e.id?G:"transparent",borderColor:K,color:p.id===e.id?X:K,...Q},children:[(0,r.jsx)(E.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:e.name}),(0,r.jsx)("span",{className:"inline sm:hidden",children:"single"===e.id?"1":"column"===e.id?"↓":"row"===e.id?"→":"□"})]},e.id))})]}),(0,r.jsx)("div",{className:"relative",children:n?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"border-8 rounded-lg overflow-hidden",style:{borderColor:m},children:[(0,r.jsx)("div",{className:"mx-auto w-full max-w-md",children:(0,r.jsx)("div",{className:"aspect-[4/3] relative",children:(0,r.jsx)("video",{ref:e,autoPlay:!0,playsInline:!0,muted:!0,controls:Z(),className:"w-full h-full object-cover rounded",style:{display:"block",transform:Z()?"scaleX(-1)":"none",WebkitTransform:Z()?"scaleX(-1)":"none"},onError:e=>{console.error("Video error:",e),A()||Z()?alert("Camera access was restricted. Please ensure you're using Safari, have granted camera permissions, and are on HTTPS."):alert("Failed to display camera stream. Please check your browser permissions."),V()}})})}),D&&(0,r.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-t-4 border-white rounded-full animate-spin"}),(0,r.jsx)("p",{className:"text-white mt-4",children:"Initializing camera..."})]}),b&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-8xl font-bold",style:Q,children:N})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:flex lg:flex-wrap gap-2 mt-4",children:[(0,r.jsxs)(o.z,{onClick:()=>H(),disabled:!g||b,className:"flex items-center justify-center gap-2 pompompurin-button",style:{backgroundColor:G,color:X,...Q},children:[(0,r.jsx)(w.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"Take Photo"})]}),(0,r.jsxs)(o.z,{onClick:()=>J(!1),disabled:!g||b,variant:"outline",className:"flex items-center justify-center gap-2",style:{borderColor:K,color:K,...Q},children:[(0,r.jsx)(v.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"3s Timer"})]}),p.count>1&&(0,r.jsxs)(o.z,{onClick:()=>J(!0),disabled:!g||b,variant:"outline",className:"flex items-center justify-center gap-2 col-span-1 sm:col-span-1",style:{borderColor:K,color:K,...Q},children:[(0,r.jsx)(w.Z,{className:"w-5 h-5"}),(0,r.jsxs)("span",{className:"hidden sm:inline",children:[p.count," Photos Timer"]}),(0,r.jsx)("span",{className:"inline sm:hidden",children:"Multi"})]}),(0,r.jsx)(o.z,{onClick:V,variant:"outline",className:"col-span-1 sm:col-span-1 lg:ml-auto",style:{borderColor:K,color:K,...Q},children:"Close Camera"})]})]}):(0,r.jsx)(i,{className:"border-2",style:{borderColor:m},children:(0,r.jsx)(d,{className:"p-4 sm:p-6 flex justify-center items-center flex-col gap-4 min-h-[250px] sm:min-h-[300px]",children:f.length>0?(0,r.jsxs)("div",{className:"text-center w-full",style:Q,children:[(0,r.jsx)("h3",{className:"font-medium mb-4",children:"Your photos are ready!"}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[(0,r.jsxs)(o.z,{onClick:M,className:"pompompurin-button w-full sm:w-auto",style:{backgroundColor:G,color:X,...Q},children:[(0,r.jsx)(w.Z,{className:"w-5 h-5 mr-2"}),"Take More Photos"]}),(0,r.jsxs)(o.z,{onClick:Y,variant:"outline",className:"w-full sm:w-auto",style:{borderColor:K,color:K,...Q},children:[(0,r.jsx)(I.Z,{className:"w-4 h-4 mr-2"}),"Clear Photos"]})]})]}):(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"w-full text-center",children:[(0,r.jsxs)(o.z,{onClick:()=>{console.log("Camera button clicked"),M()},size:"lg",className:"flex items-center justify-center gap-2 mb-4 pompompurin-button w-full sm:w-auto",style:{backgroundColor:G,color:X,...Q},disabled:D,children:[(0,r.jsx)(w.Z,{className:"w-6 h-6"}),D?"Initializing Camera...":"Open Camera"]}),(0,r.jsxs)("p",{className:"text-center text-sm mt-2",style:Q,children:["Your browser may ask for permission to access your camera.",(0,r.jsx)("br",{className:"hidden sm:block"}),'Please click "Allow" when prompted.']}),(A()||Z())&&(0,r.jsxs)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-300 rounded text-left text-xs",style:Q,children:[(0,r.jsx)("p",{className:"font-medium",children:Z()?"Note for iOS users:":"Note for Safari users:"}),Z()?(0,r.jsxs)("ul",{className:"list-disc pl-4 mt-1 space-y-1",children:[(0,r.jsx)("li",{children:"iOS has strict camera permissions"}),(0,r.jsx)("li",{children:"Make sure to use Safari browser (not Chrome or Firefox on iOS)"}),(0,r.jsx)("li",{children:"Enable camera access in Settings → Privacy → Camera"}),(0,r.jsx)("li",{children:"If camera fails, try reloading or rotating your device"}),(0,r.jsx)("li",{children:"Tap the video area if it doesn't start automatically"}),(0,r.jsx)("li",{children:"Photos will open in a new tab for saving (long press to save)"})]}):(0,r.jsxs)("ul",{className:"list-disc pl-4 mt-1 space-y-1",children:[(0,r.jsx)("li",{children:"Camera access may be restricted in Safari"}),(0,r.jsx)("li",{children:"You may need to enable camera access in Safari settings"}),(0,r.jsx)("li",{children:"Using Chrome or Firefox may provide a better experience"})]})]}),!1===B&&(0,r.jsxs)("div",{className:"mt-4 p-3 bg-red-50 border border-red-300 rounded text-left",style:Q,children:[(0,r.jsxs)("p",{className:"font-medium text-red-700",children:["Your browser (",_,") doesn't support camera access"]}),(0,r.jsx)("p",{className:"mt-1 text-sm",children:"Please try using a different browser like Chrome or Firefox."})]})]})})})})}),(0,r.jsx)("canvas",{ref:s,className:"hidden",children:"Your browser does not support the canvas element. Please try a different browser."}),f.length>0&&(0,r.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-2 sm:gap-0",children:[(0,r.jsx)("h3",{className:"font-medium text-lg",style:Q,children:"Your Photos"}),(0,r.jsxs)(o.z,{onClick:Y,variant:"outline",size:"sm",className:"flex items-center gap-2 w-full sm:w-auto",style:{borderColor:K,color:K,...Q},children:[(0,r.jsx)(I.Z,{className:"w-4 h-4 mr-1"}),"Clear All Photos"]})]}),(0,r.jsx)("div",{className:"grid ".concat((()=>{switch(p.id){case"single":default:return"grid-cols-1 grid-rows-1";case"column":return"grid-cols-1 grid-rows-3";case"row":return"grid-cols-3 grid-rows-1";case"grid":return"grid-cols-2 grid-rows-2"}})()," gap-2 sm:gap-4"),children:f.map((e,s)=>e&&(0,r.jsxs)("div",{className:"border-4 rounded-lg overflow-hidden relative group aspect-[4/3]",style:{borderColor:m},children:[(0,r.jsx)("img",{src:e,alt:"Captured photo ".concat(s+1),className:"w-full h-full object-contain"}),(0,r.jsx)("button",{onClick:()=>{let e=[...f];e[s]="",h(e.filter(e=>""!==e))},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1    opacity-70 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",title:"Delete this photo","aria-label":"Delete photo",children:(0,r.jsx)(T.Z,{className:"h-4 w-4"})})]},s))}),(0,r.jsx)("div",{className:"flex justify-center mt-4",children:(0,r.jsxs)(o.z,{onClick:()=>{if(0===f.length||!s.current)return;let e=s.current,t=e.getContext("2d");if(!t)return;e.width=400*p.cols,e.height=300*p.rows,t.fillStyle=m,t.fillRect(0,0,e.width,e.height),t.strokeStyle=m,t.lineWidth=10,t.strokeRect(5,5,e.width-10,e.height-10);let r=[...f];for(;r.length<p.count;)r.push("");r=r.slice(0,p.count);let a=new Image;(async()=>{for(let e=0;e<r.length;e++){if(!r[e])continue;let s=Math.floor(e/p.cols),o=e%p.cols*400,l=300*s;await new Promise(s=>{a.onload=()=>{let e,r;let i=a.width/a.height;i>1.3571428571428572?(e=380,r=380/i):(r=280,e=280*i);let n=o+10+(380-e)/2,c=l+10+(280-r)/2;t.drawImage(a,n,c,e,r),s()},a.src=r[e]})}t.font="normal 16px -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif",t.fillStyle="white",t.textAlign="right";let s=new Date().toLocaleDateString();t.fillText(s,e.width-15,e.height-15);try{let s=e.toDataURL("image/png");if(Z()){console.log("iOS detected, using Safari-compatible download approach");let e=window.open();e?e.document.write('\n              <html>\n                <head>\n                  <title>Save Your Photo</title>\n                  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n                  <style>\n                    body { font-family: -apple-system, sans-serif; margin: 0; padding: 20px; text-align: center; background-color: #f8f8f8; }\n                    img { max-width: 100%; border: 10px solid '.concat(m,'; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-bottom: 20px; }\n                    h2 { color: #333; }\n                    p { color: #666; line-height: 1.5; }\n                  </style>\n                </head>\n                <body>\n                  <h2>Your Photo is Ready!</h2>\n                  <img src="').concat(s,'" alt="Your Photobooth Picture" />\n                  <p>Press and hold on the image to save it to your photos.</p>\n                </body>\n              </html>\n            ')):alert("Unable to open new window. Please check your popup blocker settings.")}else{let e=atob(s.split(",")[1]),t=s.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),a=new Uint8Array(r);for(let s=0;s<e.length;s++)a[s]=e.charCodeAt(s);let o=new Blob([r],{type:t}),l=URL.createObjectURL(o),i=document.createElement("a");i.style.display="none",i.href=l,i.download="photobooth-".concat(Date.now(),".png"),document.body.appendChild(i),i.click(),setTimeout(()=>{document.body.removeChild(i),URL.revokeObjectURL(l)},100)}}catch(e){console.error("Download failed:",e),alert("Failed to download the photo. Please try again.")}})().catch(e=>{console.error("Error creating photo:",e),alert("An error occurred while creating your photo. Please try again.")})},className:"flex items-center justify-center gap-2 pompompurin-button w-full sm:w-auto",style:{backgroundColor:G,color:X,...Q},children:[(0,r.jsx)(R.Z,{className:"w-5 h-5"}),"Download Photo",p.count>1?"s":""]})})]})]})}function M(){var e,s,t;let[l,p]=(0,a.useState)(1500),[y,T]=(0,a.useState)(!1),[E,I]=(0,a.useState)(!1),[R,F]=(0,a.useState)(0),[U,M]=(0,a.useState)(""),[V,H]=(0,a.useState)([]),[Y,J]=(0,a.useState)(0),[L,B]=(0,a.useState)([]),[W,_]=(0,a.useState)(""),[q,G]=(0,a.useState)(""),[X,K]=(0,a.useState)(null),[Q,$]=(0,a.useState)({isOpen:!1,note:null}),[ee,es]=(0,a.useState)([]),[et,er]=(0,a.useState)(""),[ea,eo]=(0,a.useState)(""),[el,ei]=(0,a.useState)(""),[en,ec]=(0,a.useState)({isOpen:!1,title:"",message:"",onConfirm:()=>{}});(0,a.useEffect)(()=>{let e=localStorage.getItem("pompompurin-timer"),s=localStorage.getItem("pompompurin-notes"),t=localStorage.getItem("pompompurin-expenses"),r=localStorage.getItem("pompompurin-pomodoros"),a=localStorage.getItem("pompompurin-sessions");if(e){let s=JSON.parse(e);p(s.timeLeft),I(s.isBreak),M(s.currentTitle||"")}s&&B(JSON.parse(s)),t&&es(JSON.parse(t)),r&&F(parseInt(r)),a&&H(JSON.parse(a))},[]),(0,a.useEffect)(()=>{let e=null;if(y&&l>0)e=setInterval(()=>{J(e=>e+1),p(e=>{let s=e-1;return localStorage.setItem("pompompurin-timer",JSON.stringify({timeLeft:s,isBreak:E,currentTitle:U})),s})},1e3);else if(0===l){if(T(!1),E)I(!1),p(1500);else{let e=[...V,{id:Date.now().toString(),title:U.trim()||"Untitled Session",completedAt:new Date().toLocaleString(),duration:25}];H(e),localStorage.setItem("pompompurin-sessions",JSON.stringify(e)),F(e=>{let s=e+1;return localStorage.setItem("pompompurin-pomodoros",s.toString()),s}),I(!0),p(300),M("")}}return()=>{e&&clearInterval(e)}},[y,l,E]);let ed=e=>{let s=V.filter(s=>s.id!==e);H(s),localStorage.setItem("pompompurin-sessions",JSON.stringify(s))},em=e=>{let s=V.find(s=>s.id===e),t=(null==s?void 0:s.title)||"Untitled Session";ec({isOpen:!0,title:"Delete Pomodoro Session?",message:'Are you sure you want to delete "'.concat(t,'"?'),onConfirm:()=>{ed(e),ec(e=>({...e,isOpen:!1}))}})},eu=e=>{let s=L.filter(s=>s.id!==e);B(s),localStorage.setItem("pompompurin-notes",JSON.stringify(s))},ep=e=>{let s=L.find(s=>s.id===e),t=(null==s?void 0:s.title)||"Untitled Note";ec({isOpen:!0,title:"Delete Note?",message:'Are you sure you want to delete "'.concat(t,'"?'),onConfirm:()=>{eu(e),ec(e=>({...e,isOpen:!1}))}})},ex=e=>{$({isOpen:!0,note:e})},ef=e=>{let s=ee.filter(s=>s.id!==e);es(s),localStorage.setItem("pompompurin-expenses",JSON.stringify(s))},eh=e=>{let s=ee.find(s=>s.id===e),t=(null==s?void 0:s.description)||"expense";ec({isOpen:!0,title:"Delete Expense?",message:'Are you sure you want to delete "'.concat(t,'"?'),onConfirm:()=>{ef(e),ec(e=>({...e,isOpen:!1}))}})},eg=ee.reduce((e,s)=>e+s.amount,0);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 w-[95%] max-w-7xl fixed-header",children:(0,r.jsxs)("div",{className:"rounded-xl border-2 px-4 sm:px-6 md:px-8 py-3 sm:py-4 shadow-xl flex flex-col sm:flex-row items-center justify-center gap-2 sm:gap-4 md:gap-6 floating-header",style:{borderColor:"#a65c18"},children:[(0,r.jsx)(D.default,{src:"/images/pompompurin/icon.png",alt:"Pompompurin",width:56,height:56,className:"rounded-full sm:w-10 sm:h-10"}),(0,r.jsx)("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-center break-words",style:{color:"#a65c18",fontFamily:"Frankfurter, cursive"},children:"RAFA's Productivity Tool"})]})}),(0,r.jsxs)("div",{className:"min-h-screen p-2 sm:p-4 pt-10 sm:pt-20 md:pt-30",style:{color:"#a65c18",fontFamily:"Frankfurter, cursive"},children:[(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsxs)(x,{defaultValue:"timer",className:"w-full",children:[(0,r.jsxs)(f,{className:"grid w-full grid-cols-4 mb-6 gap-1",style:{backgroundColor:"#f5e6a3"},children:[(0,r.jsxs)(h,{value:"timer",className:"flex items-center justify-center gap-2 text-sm cursor-pointer",children:[(0,r.jsx)(v.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"hidden xs:inline",children:"Pomodoro "}),"Timer"]}),(0,r.jsxs)(h,{value:"notes",className:"flex items-center justify-center gap-2 text-sm cursor-pointer",children:[(0,r.jsx)(j.Z,{className:"w-4 h-4"}),"Notes"]}),(0,r.jsxs)(h,{value:"expenses",className:"flex items-center justify-center gap-2 text-sm cursor-pointer",children:[(0,r.jsx)("span",{className:"text-base leading-none mt-0.5",children:"₱"})," ","Expenses"]}),(0,r.jsxs)(h,{value:"photobooth",className:"flex items-center justify-center gap-2 text-sm cursor-pointer",children:[(0,r.jsx)(w.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"hidden xs:inline",children:"Photo"}),"Booth"]})]}),(0,r.jsx)(g,{value:"timer",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(i,{className:"border-2 pompompurin-border pompompurin-card",children:[(0,r.jsxs)(n,{className:"text-center",children:[(0,r.jsx)(c,{className:"text-3xl",children:E?"\uD83D\uDC33 Break Time!":"\uD83E\uDDA6 Focus Time!"}),(0,r.jsxs)(b,{variant:"secondary",className:"mx-auto w-fit",children:["Completed Pomodoros: ",R]})]}),(0,r.jsxs)(d,{className:"text-center space-y-6",children:[!E&&(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(m,{placeholder:"What are you working on? (optional)",value:U,onChange:e=>M(e.target.value),style:{borderColor:"#a65c18"},className:"text-center",disabled:y})}),(0,r.jsx)("div",{className:"text-6xl sm:text-7xl md:text-8xl font-bold",style:{color:"#a65c18"},children:"".concat(Math.floor(l/60).toString().padStart(2,"0"),":").concat((l%60).toString().padStart(2,"0"))}),y&&(0,r.jsx)("div",{className:"flex justify-center my-2",children:(0,r.jsx)("img",{src:"/images/pompompurin/icon.png",alt:"Pompompurin",width:80,height:80,className:"pomodoro-active-image rounded-full"})}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[(0,r.jsxs)(o.z,{onClick:()=>T(!y),size:"lg",className:"flex items-center justify-center gap-2 w-full sm:w-auto pompompurin-button",style:{backgroundColor:"#a65c18",color:"#fefcac"},children:[y?(0,r.jsx)(N.Z,{className:"w-5 h-5"}):(0,r.jsx)(S.Z,{className:"w-5 h-5"}),y?"Pause":"Start"]}),(0,r.jsxs)(o.z,{onClick:()=>{T(!1),p(E?300:1500),localStorage.setItem("pompompurin-timer",JSON.stringify({timeLeft:E?300:1500,isBreak:E,currentTitle:U}))},size:"lg",variant:"outline",className:"flex items-center justify-center gap-2 w-full sm:w-auto",style:{borderColor:"#a65c18",color:"#a65c18"},children:[(0,r.jsx)(C.Z,{className:"w-5 h-5"}),"Reset"]})]})]})]}),V.length>0&&(0,r.jsxs)(i,{className:"border-2 pompompurin-border pompompurin-card",children:[(0,r.jsx)(n,{children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(c,{className:"flex items-center gap-2",children:"\uD83C\uDFC6 Completed Sessions"}),(0,r.jsx)(o.z,{onClick:()=>{H([]),localStorage.setItem("pompompurin-sessions",JSON.stringify([]))},size:"sm",variant:"outline",className:"text-red-600 hover:text-red-800",style:{borderColor:"#a65c18"},children:"Clear All"})]})}),(0,r.jsx)(d,{children:(0,r.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:V.slice().reverse().map(e=>(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{backgroundColor:"#f9f4a1"},children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-sm",children:e.title}),(0,r.jsxs)("p",{className:"text-xs opacity-70",children:[e.duration," min • ",e.completedAt]})]}),(0,r.jsx)(o.z,{onClick:()=>em(e.id),size:"sm",variant:"ghost",className:"text-red-500 hover:text-red-700",children:(0,r.jsx)(k.Z,{className:"w-3 h-3"})})]},e.id))})})]})]})}),(0,r.jsx)(g,{value:"notes",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(i,{className:"border-2 pompompurin-border pompompurin-card w-full mx-auto",children:[(0,r.jsx)(n,{className:"px-3 sm:px-6",children:(0,r.jsxs)(c,{className:"flex items-center gap-2 text-base sm:text-lg",children:[(0,r.jsx)(O.Z,{className:"w-4 sm:w-5 h-4 sm:h-5"}),"Add New Note"]})}),(0,r.jsxs)(d,{className:"space-y-4 px-3 sm:px-6 py-2 sm:py-4",children:[(0,r.jsx)(m,{placeholder:"Note title...",value:W,onChange:e=>_(e.target.value),style:{borderColor:"#a65c18"}}),(0,r.jsx)(u,{placeholder:"Write your note here...",value:q,onChange:e=>G(e.target.value),rows:4,style:{borderColor:"#a65c18"}}),(0,r.jsxs)(o.z,{onClick:()=>{if(W.trim()&&q.trim()){let e=[...L,{id:Date.now().toString(),title:W,content:q,createdAt:new Date().toLocaleDateString()}];B(e),localStorage.setItem("pompompurin-notes",JSON.stringify(e)),_(""),G("")}},className:"flex items-center gap-2 pompompurin-button",style:{backgroundColor:"#a65c18",color:"#fefcac"},children:[(0,r.jsx)(P.Z,{className:"w-4 h-4"}),"Add Note"]})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:L.map(e=>{let s=e.title.length>50||e.content.length>150,t=e.title.length>50?e.title.substring(0,50)+"...":e.title,a=e.content.length>150?e.content.substring(0,150)+"...":e.content;return(0,r.jsxs)(i,{className:"border-2 pompompurin-border pompompurin-card cursor-pointer hover:shadow-lg transition-shadow w-full mx-auto",onClick:()=>ex(e),children:[(0,r.jsxs)(n,{className:"pb-2 px-3 sm:px-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)(c,{className:"text-lg break-words flex-1 pr-2 line-clamp-2",children:s?t:e.title}),(0,r.jsx)(o.z,{onClick:s=>{s.stopPropagation(),ep(e.id)},size:"sm",variant:"ghost",className:"text-red-500 hover:text-red-700 flex-shrink-0",children:(0,r.jsx)(k.Z,{className:"w-4 h-4"})})]}),(0,r.jsx)("p",{className:"text-sm opacity-70",children:e.createdAt})]}),(0,r.jsxs)(d,{className:"px-3 sm:px-6 py-2 sm:py-4",children:[(0,r.jsx)("p",{className:"whitespace-pre-wrap break-words line-clamp-3",children:s?a:e.content}),s&&(0,r.jsx)("p",{className:"text-sm opacity-50 mt-2 italic",children:"Click to view full note"})]})]},e.id)})}),0===L.length&&(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-xl",children:"\uD83D\uDCDD No notes yet! Add your first note above."})})]})}),(0,r.jsx)(g,{value:"expenses",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(i,{className:"border-2 pompompurin-border pompompurin-card",children:[(0,r.jsx)(n,{children:(0,r.jsxs)(c,{className:"flex items-center gap-2",children:[(0,r.jsx)(P.Z,{className:"w-5 h-5"}),"Add New Expense"]})}),(0,r.jsxs)(d,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 md:grid-cols-3",children:[(0,r.jsx)(m,{placeholder:"Description...",value:et,onChange:e=>er(e.target.value),style:{borderColor:"#a65c18"}}),(0,r.jsx)(m,{type:"number",step:"0.01",placeholder:"Amount...",value:ea,onChange:e=>eo(e.target.value),style:{borderColor:"#a65c18"}}),(0,r.jsx)(m,{placeholder:"Category...",value:el,onChange:e=>ei(e.target.value),style:{borderColor:"#a65c18"},className:"sm:col-span-2 md:col-span-1"})]}),(0,r.jsxs)(o.z,{onClick:()=>{if(et.trim()&&ea&&el.trim()){let e=[...ee,{id:Date.now().toString(),description:et,amount:parseFloat(ea),category:el,date:new Date().toLocaleDateString()}];es(e),localStorage.setItem("pompompurin-expenses",JSON.stringify(e)),er(""),eo(""),ei("")}},className:"flex items-center gap-2 pompompurin-button",style:{backgroundColor:"#a65c18",color:"#fefcac"},children:[(0,r.jsx)(P.Z,{className:"w-4 h-4"}),"Add Expense"]})]})]}),(0,r.jsx)(i,{className:"border-2 pompompurin-border pompompurin-card",children:(0,r.jsx)(n,{children:(0,r.jsxs)(c,{className:"flex items-center gap-2",children:["Total Expenses: ₱ ",eg.toFixed(2)]})})}),(0,r.jsx)("div",{className:"space-y-3",children:ee.map(e=>(0,r.jsx)(i,{className:"border-2 pompompurin-border pompompurin-card",children:(0,r.jsxs)(d,{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center p-4 gap-3",children:[(0,r.jsxs)("div",{className:"flex-1 w-full",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[(0,r.jsx)("h3",{className:"font-semibold",children:e.description}),(0,r.jsx)(b,{variant:"secondary",children:e.category})]}),(0,r.jsx)("p",{className:"text-sm opacity-70",children:e.date})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between sm:justify-end gap-3 w-full sm:w-auto",children:[(0,r.jsxs)("span",{className:"text-xl font-bold",children:["₱",e.amount.toFixed(2)]}),(0,r.jsx)(o.z,{onClick:()=>eh(e.id),size:"sm",variant:"ghost",className:"text-red-500 hover:text-red-700",children:(0,r.jsx)(k.Z,{className:"w-4 h-4"})})]})]})},e.id))}),0===ee.length&&(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-xl",children:"\uD83D\uDCB0 No expenses tracked yet! Add your first expense above."})})]})}),(0,r.jsx)(g,{value:"photobooth",children:(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)(i,{className:"border-2 pompompurin-border pompompurin-card",children:[(0,r.jsx)(n,{children:(0,r.jsxs)(c,{className:"flex items-center gap-2",children:[(0,r.jsx)(w.Z,{className:"w-5 h-5"}),"PompomPurin Photobooth"]})}),(0,r.jsx)(d,{children:(0,r.jsx)(Z,{})})]})})})]}),(0,r.jsx)("footer",{className:"text-center mt-12 py-6",children:(0,r.jsx)("p",{className:"text-lg",children:"\uD83E\uDE90 I love you to the moon and to saturn \uD83E\uDE90"})})]}),(0,r.jsx)(z,{isOpen:en.isOpen,onClose:()=>ec(e=>({...e,isOpen:!1})),onConfirm:en.onConfirm,title:en.title,message:en.message}),(0,r.jsx)(A,{isOpen:Q.isOpen,onClose:()=>{$({isOpen:!1,note:null})},title:(null===(e=Q.note)||void 0===e?void 0:e.title)||"",content:(null===(s=Q.note)||void 0===s?void 0:s.content)||"",createdAt:(null===(t=Q.note)||void 0===t?void 0:t.createdAt)||""})]})]})}},5754:function(e,s,t){"use strict";t.d(s,{z:function(){return c}});var r=t(3827),a=t(4090),o=t(9143),l=t(9769),i=t(1657);let n=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,s)=>{let{className:t,variant:a,size:l,asChild:c=!1,...d}=e,m=c?o.g7:"button";return(0,r.jsx)(m,{className:(0,i.cn)(n({variant:a,size:l,className:t})),ref:s,...d})});c.displayName="Button"},1657:function(e,s,t){"use strict";t.d(s,{cn:function(){return o}});var r=t(3167),a=t(1367);function o(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.m6)((0,r.W)(s))}}},function(e){e.O(0,[344,857,971,69,744],function(){return e(e.s=1279)}),_N_E=e.O()}]);